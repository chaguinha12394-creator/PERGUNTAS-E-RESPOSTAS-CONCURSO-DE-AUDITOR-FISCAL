<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mega Simulado Auditor Fiscal (100 Quest√µes)</title>
  <!-- Font Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
        --af-blue: #004e92;  /* Azul forte (Receita/Fisco) */
        --af-green: #007f5f; /* Verde (Finan√ßas/Contabilidade) */
        --bg-dark: #0f172a;
        --card-bg: #1e293b;
        --text-light: #f8fafc;
        --text-muted: #94a3b8;
    }
    body {
      background: var(--bg-dark);
      color: var(--text-light);
      font-family: 'Inter', sans-serif;
      text-align: center;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
    }
    #game-container {
        background: var(--card-bg);
        padding: 35px;
        border-radius: 12px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.6);
        max-width: 850px;
        width: 100%;
        border-top: 5px solid var(--af-green);
        position: relative;
        overflow: hidden;
    }
    /* Detalhe decorativo de fundo */
    #game-container::after {
        content: '$';
        position: absolute;
        top: -10%;
        right: -5%;
        font-size: 300px;
        opacity: 0.03;
        color: var(--af-green);
        pointer-events: none;
        font-weight: 800;
    }

    h1 {
      color: var(--text-light);
      margin-bottom: 5px;
      font-weight: 800;
      letter-spacing: -0.5px;
      font-size: 28px;
    }
    .subtitle {
        color: var(--af-green);
        font-size: 15px;
        margin-bottom: 30px;
        letter-spacing: 1.2px;
        text-transform: uppercase;
        font-weight: 700;
        display: inline-block;
        border-bottom: 2px solid var(--af-blue);
        padding-bottom: 5px;
    }
    #header-stats {
        display: flex;
        justify-content: space-between;
        background: #0f172a;
        padding: 12px 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        font-size: 14px;
        color: var(--text-muted);
        font-weight: 600;
        border: 1px solid #334155;
    }
    #progress-bar-container {
        width: 100%;
        height: 8px;
        background-color: #334155;
        border-radius: 4px;
        margin-bottom: 30px;
        overflow: hidden;
    }
    #progress-bar {
        height: 100%;
        background: linear-gradient(90deg, var(--af-blue), var(--af-green));
        width: 0%;
        transition: width 0.3s ease;
    }
    .pergunta {
      font-size: 19px;
      margin-bottom: 25px;
      font-weight: 500;
      line-height: 1.5;
      min-height: 70px;
      text-align: left;
    }
    button.opcao {
      display: block;
      width: 100%;
      margin: 12px auto;
      padding: 16px 20px;
      border: 2px solid #334155;
      border-radius: 10px;
      background-color: #1e293b;
      color: var(--text-light);
      font-size: 16px;
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: left;
      position: relative;
      line-height: 1.4;
    }
    button.opcao:hover {
      border-color: var(--af-blue);
      background-color: #24344d;
    }
    button.opcao strong {
        color: var(--af-green);
        margin-right: 10px;
    }
    .mensagem {
      font-size: 17px;
      margin-top: 25px;
      font-weight: 600;
      min-height: 30px;
      padding: 15px;
      border-radius: 8px;
      text-align: left;
      line-height: 1.4;
    }
    .correct-msg { background-color: rgba(5, 150, 105, 0.15); color: #34d399; border: 1px solid #059669; }
    .incorrect-msg { background-color: rgba(220, 38, 38, 0.15); color: #f87171; border: 1px solid #dc2626; }
    
    #opcoes {
        max-height: 55vh;
        overflow-y: auto;
        padding-right: 8px;
    }
    #opcoes::-webkit-scrollbar { width: 5px; }
    #opcoes::-webkit-scrollbar-track { background: transparent; }
    #opcoes::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }

    .badge {
        display: inline-block;
        padding: 5px 12px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: 700;
        margin-bottom: 15px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .action-btn {
        padding: 15px 30px;
        border: none;
        border-radius: 8px;
        font-size: 18px;
        font-weight: 700;
        cursor: pointer;
        margin-top: 30px;
        width: 100%;
        text-transform: uppercase;
        background: linear-gradient(135deg, var(--af-blue), var(--af-green));
        color: white;
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .action-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px -10px rgba(0, 127, 95, 0.5);
    }

    @media (max-width: 600px) {
        #game-container { padding: 20px; }
        h1 { font-size: 24px; }
        .pergunta { font-size: 17px; }
    }
  </style>
</head>
<body>
  <div id="game-container">
      <h1>Mega Simulado Auditor Fiscal</h1>
      <div class="subtitle">100 Quest√µes - N√≠vel Avan√ßado</div>
      
      <div id="header-stats">
          <span id="question-counter">Quest√£o 1 / 100</span>
          <span id="score-counter">Acertos: 0</span>
      </div>
      <div id="progress-bar-container">
          <div id="progress-bar"></div>
      </div>

      <div id="game">
        <div style="text-align: left;">
            <span id="categoria-badge" class="badge">GERAL</span>
        </div>
        <div class="pergunta" id="pergunta">Carregando base de dados...</div>
        <div id="opcoes"></div>
        <div class="mensagem" id="mensagem"></div>
      </div>
  </div>

  <script>
    // =========================================
    // BANCO DE DADOS - 100 QUEST√ïES AUDITOR FISCAL
    // =========================================
    // [TRIB] Tribut√°rio (30)
    // [CONT] Contabilidade Geral/Avan√ßada/Custos (25)
    // [AUD] Auditoria (15)
    // [ADM] Administrativo/Constitucional (15)
    // [RLM] Racioc√≠nio L√≥gico/Financeira (8)
    // [TI] Tecnologia da Informa√ß√£o (7)

    const bancoDePerguntas = [
      // --- DIREITO TRIBUT√ÅRIO (30 quest√µes) ---
      { cat: "TRIB", q: "Segundo o CTN, a obriga√ß√£o tribut√°ria principal surge com a ocorr√™ncia do fato gerador e tem por objeto o pagamento de tributo ou penalidade pecuni√°ria. Ela extingue-se juntamente com:", op: ["O lan√ßamento", "O cr√©dito dela decorrente", "A inscri√ß√£o em d√≠vida ativa", "A fiscaliza√ß√£o", "O fato gerador"], correta: 1 },
      { cat: "TRIB", q: "A imunidade tribut√°ria dos livros, jornais, peri√≥dicos e o papel destinado a sua impress√£o (art. 150, VI, 'd', CF) √© classificada como:", op: ["Imunidade subjetiva (ou pessoal)", "Imunidade objetiva (ou real)", "Imunidade mista", "Isen√ß√£o heter√¥noma", "N√£o incid√™ncia pura"], correta: 1 }, // (Protege o objeto/bem, n√£o a pessoa).
      { cat: "TRIB", q: "O princ√≠pio da n√£o cumulatividade √© obrigat√≥rio para quais impostos?", op: ["IPI, ICMS e impostos residuais da Uni√£o", "IR, IPTU e IPVA", "ISS, ITR e IOF", "Apenas ICMS", "Todos os impostos federais"], correta: 0 },
      { cat: "TRIB", q: "A Uni√£o pode instituir empr√©stimo compuls√≥rio para investimento p√∫blico de car√°ter urgente e relevante interesse nacional. Nesse caso, ele deve respeitar:", op: ["Apenas a anterioridade anual", "Apenas a anterioridade nonagesimal", "Ambas as anterioridades (anual e nonagesimal)", "Nenhuma anterioridade (cobran√ßa imediata)", "Apenas a legalidade"], correta: 2 }, // (Para calamidade/guerra √© imediato. Para investimento p√∫blico, respeita as duas).
      { cat: "TRIB", q: "A COSIP (Contribui√ß√£o de Ilumina√ß√£o P√∫blica) pode ter a base de c√°lculo atrelada ao consumo de energia el√©trica?", op: ["N√£o, √© inconstitucional por virar taxa", "Sim, √© constitucional (S√∫mula Vinculante 41)", "Apenas para ind√∫strias", "Depende de lei complementar", "Apenas se o consumidor concordar"], correta: 1 },
      { cat: "TRIB", q: "Responsabilidade por sucess√£o (art. 133 CTN): Se o adquirente de um fundo de com√©rcio continuar a explora√ß√£o da atividade e o alienante cessar a explora√ß√£o, o adquirente responde pelos tributos relativos ao fundo de com√©rcio:", op: ["Integralmente", "Subsidiariamente com o alienante", "N√£o responde", "Apenas por 50%", "Solidariamente se houver dolo"], correta: 0 }, // (Se alienante continuar ou iniciar nova atividade em 6 meses, adquirente responde subsidiariamente. Se alienante parar, adquirente responde integralmente).
      { cat: "TRIB", q: "A den√∫ncia espont√¢nea (art. 138 CTN) n√£o se aplica:", op: ["Aos tributos sujeitos a lan√ßamento por homologa√ß√£o regularmente declarados, mas pagos a destempo (S√∫mula 360 STJ)", "Aos tributos lan√ßados de of√≠cio antes da notifica√ß√£o", "√Äs obriga√ß√µes acess√≥rias", "Se houver pagamento parcial", "Todas as alternativas est√£o corretas"], correta: 4 },
      { cat: "TRIB", q: "O ITBI √© um imposto municipal que tem como fato gerador a transmiss√£o:", op: ["Causa mortis de bens im√≥veis", "Inter vivos, a qualquer t√≠tulo, por ato oneroso, de bens im√≥veis", "Inter vivos, a t√≠tulo gratuito (doa√ß√£o), de bens im√≥veis", "De bens m√≥veis e im√≥veis", "Apenas de terrenos rurais"], correta: 1 }, // (Gratuito ou causa mortis √© ITCMD, estadual).
      { cat: "TRIB", q: "A capacidade tribut√°ria passiva independe:", op: ["Da capacidade civil das pessoas naturais", "De estar a pessoa jur√≠dica regularmente constitu√≠da", "De achar-se a pessoa natural sujeita a medidas que importem priva√ß√£o ou limita√ß√£o do exerc√≠cio de atividades civis, comerciais ou profissionais", "Todas as anteriores", "Nenhuma das anteriores"], correta: 3 },
      { cat: "TRIB", q: "Prescri√ß√£o intercorrente na execu√ß√£o fiscal (Lei 6.830/80) ocorre quando o processo fica paralisado por mais de:", op: ["1 ano sem achar bens", "5 anos ap√≥s o arquivamento provis√≥rio (que ocorre ap√≥s 1 ano de suspens√£o por n√£o localiza√ß√£o do devedor ou bens)", "3 anos", "10 anos", "Nunca prescreve"], correta: 1 },
      { cat: "TRIB", q: "O lan√ßamento de of√≠cio √© obrigat√≥rio quando:", op: ["A lei assim o determine", "A declara√ß√£o n√£o seja prestada, por quem de direito, no prazo e na forma da legisla√ß√£o", "A pessoa obrigada, embora tenha prestado declara√ß√£o, deixe de atender, no prazo e na forma da legisla√ß√£o, a pedido de esclarecimento formulado pela autoridade administrativa", "Se comprove falsidade, erro ou omiss√£o quanto a qualquer elemento definido na legisla√ß√£o tribut√°ria como sendo de declara√ß√£o obrigat√≥ria", "Todas as alternativas est√£o corretas"], correta: 4 },
      { cat: "TRIB", q: "A imunidade musical (PEC da M√∫sica) isenta de impostos:", op: ["Apenas CDs e DVDs de artistas brasileiros", "Fonogramas e videofonogramas musicais produzidos no Brasil contendo obras musicais ou literomusicais de autores brasileiros e/ou obras em geral interpretadas por artistas brasileiros, bem como os suportes materiais ou arquivos digitais que os contenham", "Apenas shows ao vivo", "Instrumentos musicais importados", "R√°dios comunit√°rias"], correta: 1 },
      { cat: "TRIB", q: "O princ√≠pio da veda√ß√£o √†s isen√ß√µes heter√¥nomas pro√≠be:", op: ["A Uni√£o de instituir isen√ß√µes de tributos da compet√™ncia dos Estados, do DF ou dos Munic√≠pios", "Os Estados de isentarem tributos municipais", "O Munic√≠pio de isentar seus pr√≥prios tributos", "A Uni√£o de isentar impostos federais", "O Judici√°rio de conceder isen√ß√µes"], correta: 0 },
      { cat: "TRIB", q: "S√£o modalidades de extin√ß√£o do cr√©dito tribut√°rio (art. 156 CTN), EXCETO:", op: ["Pagamento", "Compensa√ß√£o", "Transa√ß√£o", "Remiss√£o", "Morat√≥ria"], correta: 4 }, // (Morat√≥ria √© suspens√£o).
      { cat: "TRIB", q: "A D√≠vida Ativa da Fazenda P√∫blica abrange os cr√©ditos:", op: ["Apenas tribut√°rios", "Tribut√°rios e n√£o tribut√°rios (ex: multas administrativas, custas processuais)", "Apenas impostos", "Apenas de pessoas jur√≠dicas", "Apenas federais"], correta: 1 },
      { cat: "TRIB", q: "Segundo a Constitui√ß√£o, pertence aos Munic√≠pios:", op: ["50% do produto da arrecada√ß√£o do ITR", "50% do produto da arrecada√ß√£o do IPVA licenciado em seu territ√≥rio", "25% do produto da arrecada√ß√£o do ICMS do Estado", "Todas as alternativas est√£o corretas", "Nenhuma das anteriores"], correta: 3 },
      { cat: "TRIB", q: "O ISS n√£o incide sobre:", op: ["Loca√ß√£o de bens m√≥veis (S√∫mula Vinculante 31)", "Servi√ßos banc√°rios", "Servi√ßos de sa√∫de", "Servi√ßos de constru√ß√£o civil", "Servi√ßos de inform√°tica"], correta: 0 },
      { cat: "TRIB", q: "A progressividade do IPTU pode ser:", op: ["Apenas fiscal (em raz√£o do valor do im√≥vel)", "Fiscal e extrafiscal (no tempo, para garantir a fun√ß√£o social da propriedade)", "Apenas extrafiscal", "√â proibida", "Apenas para im√≥veis comerciais"], correta: 1 },
      { cat: "TRIB", q: "CIDE-Combust√≠veis pode ter al√≠quotas reduzidas e restabelecidas por ato do Poder Executivo (Decreto)?", op: ["Sim, √© uma exce√ß√£o √† legalidade estrita (mitigada)", "N√£o, apenas por lei", "Apenas se houver guerra", "N√£o, pois √© um imposto", "Apenas para gasolina"], correta: 0 },
      { cat: "TRIB", q: "O 'sigilo fiscal' (art. 198 CTN) veda a divulga√ß√£o de informa√ß√µes sobre a situa√ß√£o econ√¥mica ou financeira do sujeito passivo ou sobre a natureza e o estado de seus neg√≥cios ou atividades. EXCETUA-SE da veda√ß√£o:", op: ["Requisi√ß√£o de autoridade judici√°ria no interesse da justi√ßa", "Solicita√ß√µes de autoridade administrativa no interesse da Administra√ß√£o P√∫blica, desde que comprovada a instaura√ß√£o regular de processo administrativo, no √≥rg√£o ou na entidade respectiva, com o objetivo de investigar o sujeito passivo a que se refere a informa√ß√£o, por pr√°tica de infra√ß√£o administrativa", "Inscri√ß√µes na D√≠vida Ativa da Fazenda P√∫blica", "Parcelamento ou morat√≥ria", "Todas as alternativas s√£o exce√ß√µes v√°lidas"], correta: 4 },
      { cat: "TRIB", q: "A n√£o incid√™ncia pura difere da isen√ß√£o porque:", op: ["A n√£o incid√™ncia ocorre quando o fato n√£o se enquadra na hip√≥tese de incid√™ncia da lei; a isen√ß√£o √© a dispensa legal do pagamento de tributo devido", "S√£o sin√¥nimos", "A n√£o incid√™ncia √© sempre inconstitucional", "A isen√ß√£o √© autom√°tica", "A n√£o incid√™ncia depende de lei espec√≠fica"], correta: 0 },
      { cat: "TRIB", q: "O ICMS incide sobre a importa√ß√£o de mercadorias por pessoa f√≠sica ou jur√≠dica, ainda que n√£o seja contribuinte habitual do imposto, qualquer que seja a sua finalidade?", op: ["Sim, sempre (S√∫mula Vinculante 48, em parte)", "N√£o, apenas se for para revenda", "Apenas se for pessoa jur√≠dica", "N√£o, se for para uso pr√≥prio", "Apenas sobre bens de luxo"], correta: 0 },
      { cat: "TRIB", q: "Para efeito de ocorr√™ncia do fato gerador do Imposto de Renda, considera-se disponibilidade econ√¥mica ou jur√≠dica:", op: ["Apenas o recebimento em dinheiro", "O momento em que a renda ou os proventos de qualquer natureza s√£o auferidos, independentemente de sua denomina√ß√£o ou localiza√ß√£o", "Apenas ap√≥s a declara√ß√£o anual", "Apenas se o valor for superior a R$ 50.000", "Quando o dinheiro entra no banco"], correta: 1 },
      { cat: "TRIB", q: "A substitui√ß√£o tribut√°ria √© um mecanismo que atribui a responsabilidade pelo pagamento do tributo a:", op: ["Um terceiro vinculado ao fato gerador, e n√£o ao contribuinte direto", "Apenas ao consumidor final", "Apenas √† ind√∫stria", "Ao governo", "A ningu√©m"], correta: 0 },
      { cat: "TRIB", q: "A elis√£o fiscal difere da evas√£o fiscal porque:", op: ["A elis√£o √© o planejamento tribut√°rio l√≠cito (antes do fato gerador); a evas√£o √© a pr√°tica il√≠cita (fraude, sonega√ß√£o, conluio) para n√£o pagar tributo", "S√£o a mesma coisa", "A elis√£o √© crime", "A evas√£o √© permitida", "Depende do valor"], correta: 0 },
      { cat: "TRIB", q: "O IOF pode ter suas al√≠quotas alteradas pelo Poder Executivo?", op: ["Sim, para opera√ß√µes de cr√©dito, c√¢mbio e seguro, ou relativas a t√≠tulos ou valores mobili√°rios (fun√ß√£o regulat√≥ria)", "N√£o, exige lei", "Apenas para reduzir", "Apenas com autoriza√ß√£o do Banco Central", "N√£o, apenas pelo Senado"], correta: 0 },
      { cat: "TRIB", q: "√â poss√≠vel a cobran√ßa de taxas pela utiliza√ß√£o efetiva ou potencial de servi√ßos p√∫blicos espec√≠ficos e divis√≠veis, prestados ao contribuinte ou postos a sua disposi√ß√£o?", op: ["Sim, ambas as formas (efetiva ou potencial)", "N√£o, apenas se usar efetivamente", "Apenas se o servi√ßo for essencial", "N√£o, taxa s√≥ para poder de pol√≠cia", "Depende da renda do usu√°rio"], correta: 0 },
      { cat: "TRIB", q: "A imunidade tribut√°ria dos partidos pol√≠ticos, inclusive suas funda√ß√µes, das entidades sindicais dos trabalhadores, das institui√ß√µes de educa√ß√£o e de assist√™ncia social, sem fins lucrativos, exige que atendam aos requisitos da lei. Esses requisitos (art. 14 CTN) incluem:", op: ["N√£o distribu√≠rem qualquer parcela de seu patrim√¥nio ou de suas rendas, a qualquer t√≠tulo", "Aplicarem integralmente, no Pa√≠s, os seus recursos na manuten√ß√£o dos seus objetivos institucionais", "Manterem escritura√ß√£o de suas receitas e despesas em livros revestidos de formalidades capazes de assegurar sua exatid√£o", "Todas as anteriores", "Nenhuma das anteriores"], correta: 3 },
      { cat: "TRIB", q: "A contribui√ß√£o de melhoria tem como fato gerador a valoriza√ß√£o imobili√°ria decorrente de obra p√∫blica. Seu limite total √©:", op: ["O valor total da despesa realizada com a obra", "O valor da valoriza√ß√£o de cada im√≥vel", "50% do valor da obra", "O valor do IPTU", "N√£o h√° limite"], correta: 0 }, // (Limite individual = valoriza√ß√£o de cada im√≥vel. Limite total = custo da obra).
      { cat: "TRIB", q: "As multas tribut√°rias podem ter car√°ter confiscat√≥rio?", op: ["N√£o, aplica-se a elas tamb√©m a veda√ß√£o ao confisco (embora o STF admita percentuais mais altos que para os tributos em si, como 100% do valor do tributo, mas n√£o excessivos como 300%)", "Sim, para punir o sonegador", "Apenas se for reincidente", "N√£o existe limite para multas", "Sim, se a lei permitir"], correta: 0 },

      // --- CONTABILIDADE (25 quest√µes) ---
      { cat: "CONT", q: "O Patrim√¥nio L√≠quido √© composto por: Capital Social, Reservas de Capital, Ajustes de Avalia√ß√£o Patrimonial, Reservas de Lucros, A√ß√µes em Tesouraria e:", op: ["Preju√≠zos Acumulados", "Contas a Pagar", "Estoques", "Caixa", "Fornecedores"], correta: 0 },
      { cat: "CONT", q: "Despesa de deprecia√ß√£o de m√°quina usada na produ√ß√£o industrial deve ser classificada como:", op: ["Despesa Operacional", "Custo de Produ√ß√£o (que depois vira estoque de produtos em elabora√ß√£o/acabados e s√≥ vira despesa CMV quando vendido)", "Despesa Financeira", "Perda de Capital", "Investimento"], correta: 1 },
      { cat: "CONT", q: "Na DFC (M√©todo Indireto), o aumento da conta 'Clientes' (Ativo Circulante) de um ano para outro deve ser:", op: ["Somado ao Lucro L√≠quido", "Deduzido do Lucro L√≠quido (pois √© receita registrada que n√£o virou caixa)", "Ignorado", "Classificado como investimento", "Classificado como financiamento"], correta: 1 },
      { cat: "CONT", q: "Pelo m√©todo de Custeio por Absor√ß√£o, os custos fixos de fabrica√ß√£o s√£o:", op: ["Apropriados aos produtos", "Lan√ßados diretamente como despesa do per√≠odo", "Ignorados", "Considerados perdas", "Rateados apenas para os produtos mais caros"], correta: 0 },
      { cat: "CONT", q: "No Custeio Vari√°vel, a Margem de Contribui√ß√£o √© igual a:", op: ["Receita de Vendas - Custos e Despesas Vari√°veis", "Receita de Vendas - Custo das Mercadorias Vendidas", "Lucro Bruto - Despesas Fixas", "Receita L√≠quida - Custos Fixos", "Lucro Operacional"], correta: 0 },
      { cat: "CONT", q: "A conta 'Ajuste a Valor Presente' de clientes a longo prazo √©:", op: ["Retificadora do Ativo", "Receita Financeira", "Passivo Circulante", "Patrim√¥nio L√≠quido", "Despesa Antecipada"], correta: 0 },
      { cat: "CONT", q: "O CPC 00 (Estrutura Conceitual) define 'Passivo' como:", op: ["Uma obriga√ß√£o presente da entidade de transferir um recurso econ√¥mico como resultado de eventos passados", "Uma d√≠vida futura poss√≠vel", "Qualquer sa√≠da de caixa", "Um preju√≠zo prov√°vel", "O capital dos s√≥cios"], correta: 0 },
      { cat: "CONT", q: "A Reserva de Incentivos Fiscais √© uma:", op: ["Reserva de Lucros", "Reserva de Capital", "Provis√£o", "D√≠vida com o governo", "Receita diferida"], correta: 0 },
      { cat: "CONT", q: "Instrumentos Financeiros classificados como 'mensurados ao valor justo por meio de outros resultados abrangentes' t√™m seus ganhos/perdas n√£o realizados registrados em:", op: ["Receita/Despesa na DRE", "Ajustes de Avalia√ß√£o Patrimonial no PL (at√© a realiza√ß√£o)", "Reservas de Lucro", "Passivo N√£o Circulante", "Ativo Intang√≠vel"], correta: 1 },
      { cat: "CONT", q: "O que √© 'Mais-valia' (em combina√ß√µes de neg√≥cios)?", op: ["A diferen√ßa positiva entre o valor justo dos ativos l√≠quidos identific√°veis da adquirida e seu valor cont√°bil", "O √°gio pago por rentabilidade futura (goodwill)", "O lucro da venda de estoque", "Um tipo de imposto", "O valor das a√ß√µes na bolsa"], correta: 0 },
      { cat: "CONT", q: "Goodwill (√°gio por expectativa de rentabilidade futura) derivado de combina√ß√£o de neg√≥cios deve ser:", op: ["Amortizado linearmente", "N√£o amortizado, mas testado anualmente para impairment", "Lan√ßado como despesa imediatamente", "Ignorado", "Registrado no PL"], correta: 1 },
      { cat: "CONT", q: "Arrendamento Mercantil (Leasing) Financeiro: no balan√ßo do arrendat√°rio, deve-se registrar:", op: ["Apenas a despesa de aluguel", "Um ativo (direito de uso) e um passivo (obriga√ß√£o de arrendamento)", "Nada, √© off-balance", "Apenas nas notas explicativas", "Como despesa operacional total no in√≠cio"], correta: 1 }, // (Norma IFRS 16 / CPC 06 R2).
      { cat: "CONT", q: "Provis√£o para Cr√©ditos de Liquida√ß√£o Duvidosa (PCLD) √© uma conta:", op: ["Retificadora do Ativo (Clientes)", "Passivo Circulante", "Despesa Financeira", "Patrim√¥nio L√≠quido", "Receita"], correta: 0 },
      { cat: "CONT", q: "Custo Padr√£o √©:", op: ["Um custo ideal ou esperado, pr√©-determinado, usado para controle e avalia√ß√£o de desempenho", "O custo hist√≥rico real", "O custo m√©dio ponderado", "O custo de reposi√ß√£o", "O menor custo poss√≠vel"], correta: 0 },
      { cat: "CONT", q: "Ponto de Equil√≠brio Cont√°bil √© o volume de vendas em que:", op: ["A Receita Total iguala os Custos e Despesas Totais (Lucro Cont√°bil = 0)", "A empresa tem lucro m√°ximo", "A empresa cobre apenas os custos fixos", "O fluxo de caixa √© zero", "A margem de contribui√ß√£o √© zero"], correta: 0 },
      { cat: "CONT", q: "A DVA (Demonstra√ß√£o do Valor Adicionado) evidencia:", op: ["O quanto de riqueza a empresa criou e como ela foi distribu√≠da (entre empregados, governo, financiadores e s√≥cios)", "Apenas o lucro l√≠quido", "O fluxo de caixa", "A posi√ß√£o patrimonial", "O pagamento de impostos apenas"], correta: 0 },
      { cat: "CONT", q: "Estoque Final superavaliado causa:", op: ["CMV subavaliado e Lucro Bruto superavaliado", "CMV superavaliado e Lucro Bruto subavaliado", "CMV e Lucro corretos", "Apenas aumento do Ativo", "Preju√≠zo no exerc√≠cio"], correta: 0 }, // (EF maior -> CMV = EI + C - EF -> CMV menor -> Lucro maior).
      { cat: "CONT", q: "Dividendos recebidos de investimentos avaliados pelo M√©todo de Equival√™ncia Patrimonial (MEP) devem ser contabilizados na investidora como:", op: ["Receita de Dividendos", "Redu√ß√£o do valor do Investimento (Ativo N√£o Circulante)", "Aumento do PL diretamente", "Receita Financeira", "N√£o s√£o contabilizados"], correta: 1 }, // (Pois o lucro da investida j√° foi reconhecido via equival√™ncia, aumentando o investimento. O dividendo √© apenas a realiza√ß√£o financeira desse lucro, reduzindo o saldo do investimento e aumentando o caixa).
      { cat: "CONT", q: "O Princ√≠pio da Continuidade pressup√µe que:", op: ["A Entidade continuar√° em opera√ß√£o no futuro previs√≠vel", "A empresa vai fechar em breve", "Os ativos devem ser vendidos pelo valor de liquida√ß√£o", "A contabilidade deve ser feita em d√≥lar", "N√£o h√° infla√ß√£o"], correta: 0 },
      { cat: "CONT", q: "Ativo Intang√≠vel com vida √∫til indefinida:", op: ["N√£o sofre amortiza√ß√£o, mas deve ser testado para impairment anualmente", "Deve ser amortizado em 10 anos", "N√£o sofre impairment", "N√£o pode ser registrado", "Vale zero"], correta: 0 },
      { cat: "CONT", q: "Custos indiretos de fabrica√ß√£o (CIF) devem ser apropriados aos produtos mediante:", op: ["Rateio (baseado em algum crit√©rio como horas-m√°quina, m√£o-de-obra direta, etc.)", "Aloca√ß√£o direta", "Sorteio", "Estimativa aleat√≥ria", "N√£o s√£o apropriados"], correta: 0 },
      { cat: "CONT", q: "Uma empresa comprou mercadoria para revenda por R$ 1.000, com ICMS de 18% recuper√°vel incluso. O valor a ser registrado no estoque √©:", op: ["R$ 1.000", "R$ 820", "R$ 1.180", "R$ 180", "R$ 900"], correta: 1 }, // (1000 - 180 de ICMS a recuperar = 820 de custo do estoque).
      { cat: "CONT", q: "Se a taxa interna de retorno (TIR) de um projeto for maior que a taxa m√≠nima de atratividade (TMA), o projeto √©:", op: ["Vi√°vel economicamente", "Invi√°vel", "Indiferente", "Arriscado demais", "Sem fins lucrativos"], correta: 0 },
      { cat: "CONT", q: "O √çndice de Liquidez Corrente √© calculado por:", op: ["Ativo Circulante / Passivo Circulante", "Ativo Total / Passivo Total", "(Ativo Circulante - Estoques) / Passivo Circulante", "Ativo Circulante - Passivo Circulante", "Lucro L√≠quido / Ativo Total"], correta: 0 },
      { cat: "CONT", q: "A NBC TG estrutura as demonstra√ß√µes cont√°beis. Qual N√ÉO √© obrigat√≥ria para todas as empresas (apenas para cia aberta)?", op: ["DVA (Demonstra√ß√£o do Valor Adicionado)", "Balan√ßo Patrimonial", "DRE", "DFC (se PL > 2mi ou cia aberta)", "DMPL (ou DLPA)"], correta: 0 },

      // --- AUDITORIA (15 quest√µes) ---
      { cat: "AUD", q: "O risco de que o auditor expresse uma opini√£o de auditoria inadequada quando as demonstra√ß√µes cont√°beis contiverem distor√ß√£o relevante √© chamado de:", op: ["Risco de Auditoria", "Risco Inerente", "Risco de Controle", "Risco de Detec√ß√£o", "Risco de Neg√≥cio"], correta: 0 },
      { cat: "AUD", q: "Testes de controle s√£o realizados para:", op: ["Obter evid√™ncia de auditoria sobre a efic√°cia operacional dos controles na preven√ß√£o ou detec√ß√£o e corre√ß√£o de distor√ß√µes relevantes", "Detectar distor√ß√µes relevantes diretamente nos valores", "Substituir os testes substantivos", "Calcular o lucro real", "Verificar a idoneidade dos s√≥cios"], correta: 0 },
      { cat: "AUD", q: "O procedimento de 'Vouching' (caminho da auditoria) consiste em:", op: ["Rastrear do documento origem para o registro cont√°bil (teste de integridade/cobertura)", "Rastrear do registro cont√°bil para o documento origem (teste de exist√™ncia/ocorr√™ncia)", "Fazer c√°lculos", "Observar invent√°rio", "Entrevistar a ger√™ncia"], correta: 1 }, // (Vouching = registro -> documento. Tracing = documento -> registro).
      { cat: "AUD", q: "A 'revis√£o anal√≠tica' (procedimentos anal√≠ticos) consiste em:", op: ["Avalia√ß√£o das informa√ß√µes cont√°beis por meio de an√°lise das rela√ß√µes plaus√≠veis entre dados financeiros e n√£o financeiros (ex: an√°lise de flutua√ß√µes, √≠ndices)", "Confer√™ncia de somas", "Contagem f√≠sica de caixa", "Leitura de atas", "Confirma√ß√£o externa"], correta: 0 },
      { cat: "AUD", q: "Se o auditor for impedido pela administra√ß√£o de realizar um procedimento importante (limita√ß√£o de escopo) e os poss√≠veis efeitos forem relevantes e generalizados, ele deve:", op: ["Abster-se de opinar", "Emitir opini√£o com ressalva", "Emitir opini√£o adversa", "Emitir opini√£o sem ressalva com √™nfase", "Denunciar √† CVM e continuar o trabalho"], correta: 0 },
      { cat: "AUD", q: "A carta de responsabilidade da administra√ß√£o (representa√ß√£o formal) tem por objetivo:", op: ["Confirmar por escrito as declara√ß√µes orais feitas ao auditor e documentar a responsabilidade da administra√ß√£o pelas demonstra√ß√µes", "Substituir os testes de auditoria", "Isentar o auditor de responsabilidade", "Culpar o contador", "Garantir que n√£o h√° fraudes"], correta: 0 },
      { cat: "AUD", q: "Eventos subsequentes do Tipo I (que evidenciam condi√ß√µes que J√Å existiam na data do balan√ßo) requerem:", op: ["Ajuste nas demonstra√ß√µes cont√°beis", "Apenas divulga√ß√£o em notas explicativas", "Nenhuma a√ß√£o", "Ressalva no parecer", "Abertura de sindic√¢ncia"], correta: 0 },
      { cat: "AUD", q: "O planejamento da auditoria √© uma fase:", op: ["Cont√≠nua e iterativa, que muitas vezes come√ßa logo ap√≥s (ou em conex√£o com) a conclus√£o da auditoria anterior", "Isolada, feita apenas no in√≠cio", "Dispens√°vel em pequenas empresas", "Feita apenas pelo s√≥cio", "Que n√£o pode ser alterada depois"], correta: 0 },
      { cat: "AUD", q: "A materialidade (ou relev√¢ncia) em auditoria depende:", op: ["Do julgamento profissional do auditor sobre a magnitude e a natureza das distor√ß√µes que podem influenciar as decis√µes dos usu√°rios", "Apenas de um percentual fixo do lucro", "Do valor total do ativo apenas", "Do que a diretoria acha importante", "Da legisla√ß√£o fiscal apenas"], correta: 0 },
      { cat: "AUD", q: "A amostragem estat√≠stica exige:", op: ["Sele√ß√£o aleat√≥ria dos itens e uso da teoria das probabilidades para avaliar os resultados", "Sele√ß√£o baseada no julgamento do auditor apenas", "Testar 100% da popula√ß√£o", "N√£o usar matem√°tica", "Escolher os maiores valores"], correta: 0 },
      { cat: "AUD", q: "Risco Inerente √©:", op: ["A suscetibilidade de uma afirma√ß√£o a uma distor√ß√£o relevante, assumindo que N√ÉO existam controles relacionados", "O risco de que os controles da entidade n√£o previnam ou detectem distor√ß√µes", "O risco de que o auditor n√£o detecte a distor√ß√£o", "O risco de fal√™ncia da empresa", "O risco de fraude apenas"], correta: 0 },
      { cat: "AUD", q: "A documenta√ß√£o de auditoria (pap√©is de trabalho) deve ser suficiente para permitir que um auditor experiente, sem nenhum contato anterior com a auditoria, entenda:", op: ["A natureza, √©poca e extens√£o dos procedimentos, os resultados obtidos e as conclus√µes alcan√ßadas", "Apenas se houve fraude", "Apenas o lucro da empresa", "Quem s√£o os donos da empresa", "Os segredos industriais"], correta: 0 },
      { cat: "AUD", q: "O auditor independente deve comunicar aos respons√°veis pela governan√ßa:", op: ["Defici√™ncias significativas de controle interno identificadas durante a auditoria", "Todas as defici√™ncias de controle, mesmo as irrelevantes", "Apenas as fraudes confirmadas", "Os nomes dos funcion√°rios incompetentes", "O plano de marketing da empresa"], correta: 0 },
      { cat: "AUD", q: "Em rela√ß√£o √† fraude, o auditor tem a responsabilidade de:", op: ["Obter seguran√ßa razo√°vel de que as demonstra√ß√µes est√£o livres de distor√ß√£o relevante, causada por fraude ou erro (mas n√£o √© garantia absoluta de detectar todas as fraudes)", "Detectar 100% das fraudes", "Investigar como a pol√≠cia", "Prender os culpados", "Ignorar se for pequena"], correta: 0 },
      { cat: "AUD", q: "O princ√≠pio da compet√™ncia profissional e devido zelo exige que o auditor:", op: ["Mantenha o conhecimento e a habilidade profissional no n√≠vel necess√°rio e aja diligentemente de acordo com as normas t√©cnicas", "Saiba tudo sobre todas as √°reas", "N√£o cobre honor√°rios", "Trabalhe de gra√ßa para ONGs", "Nunca erre"], correta: 0 },

      // --- ADM / CONST (15 quest√µes) ---
      { cat: "ADM", q: "A avoca√ß√£o de compet√™ncia √©:", op: ["Excepcional, tempor√°ria e deve ser justificada, permitindo que um superior atraia para si a compet√™ncia de um subordinado", "A regra geral na administra√ß√£o", "Proibida em qualquer hip√≥tese", "A mesma coisa que delega√ß√£o", "Definitiva"], correta: 0 },
      { cat: "ADM", q: "S√£o atributos do ato administrativo (PATI):", op: ["Presun√ß√£o de legitimidade, Autoexecutoriedade, Tipicidade e Imperatividade", "Pessoalidade, Amoralidade, Tipicidade, Inefici√™ncia", "Publicidade, Autonomia, Transpar√™ncia, Isonomia", "Perfei√ß√£o, Validade, Efic√°cia, Exequibilidade", "Nenhum desses"], correta: 0 },
      { cat: "ADM", q: "O regime jur√≠dico √∫nico dos servidores p√∫blicos civis (estatut√°rio) foi:", op: ["Restabelecido pelo STF ao suspender a efic√°cia da EC 19/98 nesse ponto (ADI 2135)", "Extinto definitivamente", "Substitu√≠do pela CLT para todos", "Opcional para cada √≥rg√£o", "Apenas para federais"], correta: 0 },
      { cat: "ADM", q: "A responsabilidade civil do Estado por atos legislativos t√≠picos (leis em tese) √©:", op: ["Regra geral, inexistente (salvo leis inconstitucionais declaradas pelo STF ou leis de efeitos concretos)", "Sempre objetiva", "Sempre subjetiva", "Solid√°ria com os deputados", "Integral"], correta: 0 },
      { cat: "ADM", q: "Em processo administrativo disciplinar (PAD), a falta de defesa t√©cnica por advogado:", op: ["N√£o ofende a Constitui√ß√£o (S√∫mula Vinculante 5)", "Anula o processo sempre", "√â causa de demiss√£o do presidente da comiss√£o", "Gera indeniza√ß√£o autom√°tica", "Obriga a nomea√ß√£o de defensor dativo sempre"], correta: 0 },
      { cat: "CONST", q: "Rem√©dio constitucional que dispensa advogado:", op: ["Habeas Corpus", "Mandado de Seguran√ßa", "Mandado de Injun√ß√£o", "A√ß√£o Popular", "Habeas Data"], correta: 0 },
      { cat: "CONST", q: "A fiscaliza√ß√£o cont√°bil, financeira, or√ßament√°ria, operacional e patrimonial da Uni√£o e das entidades da administra√ß√£o direta e indireta, quanto √† legalidade, legitimidade, economicidade, aplica√ß√£o das subven√ß√µes e ren√∫ncia de receitas, ser√° exercida pelo Congresso Nacional, mediante controle externo, e pelo sistema de:", op: ["Controle interno de cada Poder", "Controle popular apenas", "Controle do Minist√©rio P√∫blico", "Controle da imprensa", "Controle internacional"], correta: 0 },
      { cat: "CONST", q: "Os Territ√≥rios Federais integram a:", op: ["Uni√£o", "Os Estados onde se situam", "S√£o entes aut√¥nomos com autogoverno", "N√£o existem mais na teoria", "S√£o munic√≠pios especiais"], correta: 0 },
      { cat: "CONST", q: "√â vedada a edi√ß√£o de medidas provis√≥rias sobre mat√©ria:", op: ["Relativa a nacionalidade, cidadania, direitos pol√≠ticos, partidos pol√≠ticos e direito eleitoral", "Tribut√°ria (todas)", "Administrativa", "Ambiental", "Econ√¥mica"], correta: 0 },
      { cat: "CONST", q: "O Presidente da Rep√∫blica pode delegar a atribui√ß√£o de conceder indulto e comutar penas a:", op: ["Ministros de Estado, PGR ou AGU", "Apenas ao Vice-Presidente", "A qualquer cidad√£o", "Ao Presidente do STF", "√â indeleg√°vel"], correta: 0 }, // (Art. 84, par√°grafo √∫nico).
      { cat: "ADM", q: "A 'Teoria dos Motivos Determinantes' estabelece que:", op: ["A validade do ato administrativo vincula-se aos motivos indicados como seu fundamento, de modo que, se inexistentes ou falsos, o ato √© nulo (mesmo que o ato fosse discricion√°rio e n√£o precisasse ser motivado, se motivou, vinculou)", "O administrador pode mudar o motivo depois", "Os motivos n√£o importam", "Apenas atos vinculados precisam de motivo verdadeiro", "O motivo √© sempre secreto"], correta: 0 },
      { cat: "ADM", q: "A Lei de Acesso √† Informa√ß√£o (LAI) estabelece como regra:", op: ["A publicidade, sendo o sigilo a exce√ß√£o", "O sigilo, sendo a publicidade a exce√ß√£o", "A publicidade apenas para o que for conveniente", "O sigilo total de gastos p√∫blicos", "A cobran√ßa por qualquer informa√ß√£o"], correta: 0 },
      { cat: "CONST", q: "Direitos sociais previstos no art. 6¬∫ da CF (ap√≥s emendas):", op: ["Educa√ß√£o, sa√∫de, alimenta√ß√£o, trabalho, moradia, transporte, lazer, seguran√ßa, previd√™ncia social, prote√ß√£o √† maternidade e √† inf√¢ncia, assist√™ncia aos desamparados", "Apenas sa√∫de e educa√ß√£o", "Vida, liberdade, igualdade, seguran√ßa e propriedade (esses s√£o individuais do art. 5¬∫)", "Apenas trabalho e previd√™ncia", "Nenhum, foram revogados"], correta: 0 },
      { cat: "CONST", q: "A ADPF (Argui√ß√£o de Descumprimento de Preceito Fundamental) tem car√°ter:", op: ["Subsidi√°rio (s√≥ cabe se n√£o houver outro meio eficaz de sanar a lesividade)", "Principal sempre", "Apenas para leis municipais", "Apenas para atos anteriores √† CF/88", "Recursal"], correta: 0 },
      { cat: "ADM", q: "Organiza√ß√µes Sociais (OS) e Organiza√ß√µes da Sociedade Civil de Interesse P√∫blico (OSCIP) integram a:", op: ["N√£o integram a Administra√ß√£o P√∫blica (s√£o paraestatais, terceiro setor)", "Administra√ß√£o Indireta", "Administra√ß√£o Direta", "S√£o empresas p√∫blicas", "S√£o autarquias especiais"], correta: 0 },

      // --- RLM / FINANCEIRA (8 quest√µes) ---
      { cat: "RLM", q: "Se P √© V e Q √© F, ent√£o o valor l√≥gico de 'P -> Q' (condicional) √©:", op: ["Falso (Vera Fischer √© Falsa)", "Verdadeiro", "Depende", "Ambos", "Nenhum"], correta: 0 },
      { cat: "RLM", q: "Em um grupo de 10 auditores, de quantas formas podemos formar uma comiss√£o de 3 auditores?", op: ["120 (Combina√ß√£o de 10, 3 a 3 -> 10*9*8 / 3*2*1 = 120)", "720", "30", "1000", "5040"], correta: 0 },
      { cat: "RLM", q: "Tautologia √© uma proposi√ß√£o composta que √©:", op: ["Sempre verdadeira, independentemente dos valores l√≥gicos das proposi√ß√µes simples que a comp√µem", "Sempre falsa (contradi√ß√£o)", "√Äs vezes verdadeira, √†s vezes falsa (conting√™ncia)", "Uma fal√°cia", "Um paradoxo"], correta: 0 },
      { cat: "RLM", q: "A taxa nominal de 24% ao ano com capitaliza√ß√£o mensal corresponde a uma taxa efetiva mensal de:", op: ["2% (24% / 12)", "2,4%", "20%", "12%", "4%"], correta: 0 },
      { cat: "RLM", q: "O valor atual de um fluxo de caixa futuro, descontado a uma determinada taxa de juros, √© chamado de:", op: ["Valor Presente (VP)", "Valor Futuro (VF)", "Montante", "Taxa Interna de Retorno", "Valor Residual"], correta: 0 },
      { cat: "RLM", q: "A nega√ß√£o de 'Todo auditor √© honesto' √©:", op: ["Algum auditor n√£o √© honesto (ou 'Pelo menos um auditor n√£o √© honesto')", "Nenhum auditor √© honesto", "Todo auditor √© desonesto", "Jo√£o n√£o √© auditor", "Algum auditor √© honesto"], correta: 0 },
      { cat: "RLM", q: "Em juros simples, um capital dobra de valor em 5 meses se a taxa mensal for de:", op: ["20% (100% / 5 meses = 20% ao m√™s)", "10%", "50%", "5%", "25%"], correta: 0 },
      { cat: "RLM", q: "Se A e B s√£o eventos independentes, a probabilidade de ambos ocorrerem (P(A e B)) √©:", op: ["P(A) * P(B)", "P(A) + P(B)", "P(A) / P(B)", "Zero", "Um"], correta: 0 },

      // --- TI / AN√ÅLISE DE DADOS (7 quest√µes) ---
      { cat: "TI", q: "Em modelagem de dados relacional, a normaliza√ß√£o visa:", op: ["Minimizar a redund√¢ncia e evitar anomalias de inser√ß√£o, atualiza√ß√£o e exclus√£o", "Aumentar o espa√ßo ocupado em disco", "Criar mais tabelas desnecess√°rias", "Criptografar os dados", "Fazer backup"], correta: 0 },
      { cat: "TI", q: "O comando SQL para recuperar dados de uma tabela √©:", op: ["SELECT", "INSERT", "UPDATE", "DELETE", "CREATE"], correta: 0 },
      { cat: "TI", q: "Um 'Data Warehouse' (DW) √©:", op: ["Um reposit√≥rio centralizado de dados integrados de v√°rias fontes, otimizado para consulta e an√°lise (OLAP), mantendo hist√≥rico", "Um banco de dados operacional do dia a dia (OLTP)", "Um software antiv√≠rus", "Um hardware de armazenamento apenas", "Uma planilha Excel grande"], correta: 0 },
      { cat: "TI", q: "Em seguran√ßa da informa√ß√£o, a 'Assinatura Digital' garante, al√©m da autenticidade e integridade, o:", op: ["N√£o rep√∫dio (irretratabilidade) - o autor n√£o pode negar que assinou", "Sigilo absoluto (para isso precisa criptografar o conte√∫do, a assinatura em si n√£o garante sigilo do documento)", "Anonimato", "Velocidade", "Disponibilidade"], correta: 0 },
      { cat: "TI", q: "O conceito de 'Blockchain' baseia-se em:", op: ["Um livro-raz√£o distribu√≠do, descentralizado e imut√°vel, onde os registros (blocos) s√£o ligados criptograficamente", "Um banco de dados centralizado no Banco Central", "Uma nuvem privada da Receita", "Um software de contabilidade tradicional", "Uma planilha compartilhada no Google Drive"], correta: 0 },
      { cat: "TI", q: "ETL (Extract, Transform, Load) √© o processo de:", op: ["Extrair dados de diversas fontes, transform√°-los para atender √†s necessidades de neg√≥cio e carreg√°-los em um destino (ex: Data Warehouse)", "Apenas fazer backup", "Criar sites", "Instalar programas", "Consertar computadores"], correta: 0 },
      { cat: "TI", q: "Um ataque 'Ransomware':", op: ["Criptografa os dados da v√≠tima e exige pagamento de resgate para liberar a chave de descriptografia", "Rouba senhas apenas", "Deixa o computador lento", "Mostra propagandas indesejadas", "Queima o processador"], correta: 0 }
    ];

    // =========================================
    // L√ìGICA DO JOGO
    // =========================================

    function embaralhar(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    let perguntas = embaralhar([...bancoDePerguntas]);
    let indice = 0;
    let acertos = 0;
    let respondido = false;

    const el = {
        pergunta: document.getElementById("pergunta"),
        opcoes: document.getElementById("opcoes"),
        mensagem: document.getElementById("mensagem"),
        counter: document.getElementById("question-counter"),
        score: document.getElementById("score-counter"),
        badge: document.getElementById("categoria-badge"),
        progressBar: document.getElementById("progress-bar")
    };

    const categoriasInfo = {
        'TRIB':  { nome: 'Direito Tribut√°rio',   cor: '#007f5f', text: '#fff' },
        'CONT':  { nome: 'Contabilidade',        cor: '#d97706', text: '#fff' },
        'AUD':   { nome: 'Auditoria',            cor: '#7c3aed', text: '#fff' },
        'ADM':   { nome: 'Dir. Adm. / Const.',   cor: '#c2410c', text: '#fff' },
        'CONST': { nome: 'Dir. Adm. / Const.',   cor: '#0369a1', text: '#fff' }, // Agrupado visualmente
        'RLM':   { nome: 'Racioc√≠nio L√≥gico/MF', cor: '#374151', text: '#fff' },
        'TI':    { nome: 'Tecnologia da Info.',  cor: '#059669', text: '#fff' }
    };

    function atualizarInterface() {
        el.counter.textContent = `Quest√£o ${indice + 1} / ${perguntas.length}`;
        el.score.textContent = `Acertos: ${acertos}`;
        const progresso = (indice / perguntas.length) * 100;
        el.progressBar.style.width = `${progresso}%`;
    }

    function mostrarPergunta() {
      respondido = false;
      const p = perguntas[indice];
      atualizarInterface();
      
      const cat = categoriasInfo[p.cat] || { nome: 'Geral', cor: '#555', text: '#fff' };
      el.badge.textContent = cat.nome;
      el.badge.style.backgroundColor = cat.cor;
      el.badge.style.color = cat.text;
      
      el.pergunta.textContent = p.q;
      el.opcoes.innerHTML = "";
      el.mensagem.textContent = "";
      el.mensagem.className = "mensagem";
      el.mensagem.style.display = 'none';

      p.op.forEach((opcao, i) => {
        const btn = document.createElement("button");
        btn.className = "opcao";
        btn.innerHTML = `<strong>${['A','B','C','D','E'][i]})</strong> ${opcao}`;
        btn.onclick = () => verificar(i, btn, p.correta);
        el.opcoes.appendChild(btn);
      });
    }

    function verificar(i, btnClicado, corretaIndex) {
      if (respondido) return;
      respondido = true;
      el.mensagem.style.display = 'block';

      const botoes = el.opcoes.getElementsByClassName("opcao");
      
      if (i === corretaIndex) {
        acertos++;
        el.mensagem.innerHTML = "‚úÖ <strong>Resposta Correta!</strong>";
        el.mensagem.className = "mensagem correct-msg";
        btnClicado.style.borderColor = "#34d399";
        btnClicado.style.backgroundColor = "rgba(5, 150, 105, 0.2)";
      } else {
        el.mensagem.innerHTML = `‚ùå <strong>Incorreto.</strong> A correta √© a <strong>${['A','B','C','D','E'][corretaIndex]}</strong>.`;
        el.mensagem.className = "mensagem incorrect-msg";
        btnClicado.style.borderColor = "#f87171";
        btnClicado.style.backgroundColor = "rgba(220, 38, 38, 0.2)";
        botoes[corretaIndex].style.borderColor = "#34d399";
        botoes[corretaIndex].style.backgroundColor = "rgba(5, 150, 105, 0.2)";
      }

      el.score.textContent = `Acertos: ${acertos}`;
      indice++;

      // Tempo um pouco maior para quest√µes complexas
      setTimeout(() => {
        if (indice < perguntas.length) {
          mostrarPergunta();
        } else {
          finalizarJogo();
        }
      }, 3000);
    }

    function finalizarJogo() {
        el.progressBar.style.width = "100%";
        el.counter.textContent = "SIMULADO ENCERRADO";
        el.pergunta.textContent = "Resultado Final";
        el.badge.style.display = 'none';
        el.opcoes.innerHTML = "";
        el.mensagem.style.display = 'none';
        
        const perc = (acertos / perguntas.length) * 100;
        let msg = "", cor = "";

        if (perc >= 80) {
            msg = "DESEMPENHO DE APROVADO! Voc√™ dominou as mat√©rias mais dif√≠ceis. Parab√©ns!";
            cor = "#34d399";
        } else if (perc >= 60) {
            msg = "BOM DESEMPENHO! Voc√™ est√° no caminho certo, reforce os pontos fracos para chegar na zona de aprova√ß√£o.";
            cor = "#fbbf24";
        } else {
             msg = "CONTINUE ESTUDANDO! A √°rea fiscal √© desafiadora. Use este resultado para guiar seus estudos.";
             cor = "#f87171";
        }

        el.opcoes.innerHTML = `
            <div style="text-align: center; padding: 30px 20px; animation: fadeIn 1s;">
                <div style="font-size: 80px; margin-bottom: 15px;">üìä</div>
                <h2 style="color: ${cor}; font-size: 56px; margin: 0; font-weight: 800;">${perc.toFixed(0)}%</h2>
                <p style="font-size: 20px; margin: 15px 0; color: var(--text-muted);">${acertos} de ${perguntas.length} quest√µes</p>
                <div style="background: #334155; height: 2px; margin: 30px auto; width: 60%;"></div>
                <p style="color: var(--text-light); font-size: 19px; font-weight: 600; padding: 0 20px; line-height: 1.5;">${msg}</p>
                <button onclick="reiniciarJogo()" class="action-btn">Novo Simulado</button>
            </div>
        `;
    }

    function reiniciarJogo() {
        indice = 0;
        acertos = 0;
        perguntas = embaralhar([...bancoDePerguntas]);
        el.badge.style.display = 'inline-block';
        mostrarPergunta();
    }

    // Iniciar
    mostrarPergunta();
  </script>
</body>
</html>
